



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Android & iOS SDK Integration">
      
      
        <link rel="canonical" href="https://documentation.kontext.in/iOS/reference/">
      
      
        <meta name="author" content="Akshay Dekate">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.5, mkdocs-material-2.9.2">
    
    
      
        <title>SDK Reference - Kontext Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.ba0fd1a6.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.6079476c.css">
      
      
        
        
        <meta name="theme-color" content="#009688">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="teal" data-md-color-accent="teal">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#ios-native-sdk" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://documentation.kontext.in/" title="Kontext Documentation" class="md-header-nav__button md-logo">
          
            <img src="../../images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Kontext Documentation
              </span>
              <span class="md-header-nav__topic">
                SDK Reference
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." title="Overview" class="md-tabs__link">
        Overview
      </a>
    
  </li>

      
        
      
        
      
        
      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../android/quickstart/" title="Android" class="md-tabs__link">
          Android
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../quickstart/" title="iOS" class="md-tabs__link md-tabs__link--active">
          iOS
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../images/logo.png" width="48" height="48">
      
    </span>
    Kontext Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../android-quickstart/" title="Android Quickstart" class="md-nav__link">
      Android Quickstart
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../iOS-quickstart/" title="iOS Quickstart" class="md-nav__link">
      iOS Quickstart
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../gdpr/" title="GDPR" class="md-nav__link">
      GDPR
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../data-security/" title="Security Overview" class="md-nav__link">
      Security Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Android
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Android
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../android/quickstart/" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../android/reference/" title="SDK Reference" class="md-nav__link">
      SDK Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../android/firebasekey/" title="Generate Firebase Key" class="md-nav__link">
      Generate Firebase Key
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../android/troubleshoot/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      iOS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        iOS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../quickstart/" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        SDK Reference
      </label>
    
    <a href="./" title="SDK Reference" class="md-nav__link md-nav__link--active">
      SDK Reference
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#initialization" title="Initialization" class="md-nav__link">
    Initialization
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initwithlaunchoptions" title="initWithLaunchOptions" class="md-nav__link">
    initWithLaunchOptions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#privacy" title="Privacy" class="md-nav__link">
    Privacy
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setrequiresuserprivacyconsent" title="setRequiresUserPrivacyConsent" class="md-nav__link">
    setRequiresUserPrivacyConsent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consentgranted" title="consentGranted" class="md-nav__link">
    consentGranted
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requiresuserprivacyconsent" title="requiresUserPrivacyConsent" class="md-nav__link">
    requiresUserPrivacyConsent
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#settings" title="Settings" class="md-nav__link">
    Settings
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kontextsettingskeyautoprompt" title="kontextSettingsKeyAutoPrompt" class="md-nav__link">
    kontextSettingsKeyAutoPrompt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kontextsettingskeyinapplaunchurl" title="kontextSettingsKeyInAppLaunchURL" class="md-nav__link">
    kontextSettingsKeyInAppLaunchURL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#infocusdisplaytype" title="inFocusDisplayType" class="md-nav__link">
    inFocusDisplayType
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#registering-push" title="Registering Push" class="md-nav__link">
    Registering Push
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#promptforpushnotificationswithuserresponse" title="promptForPushNotificationsWithUserResponse" class="md-nav__link">
    promptForPushNotificationsWithUserResponse
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements" title="Requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recommendations" title="Recommendations" class="md-nav__link">
    Recommendations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#status" title="Status" class="md-nav__link">
    Status
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getpermissionsubscriptionstate" title="getPermissionSubscriptionState" class="md-nav__link">
    getPermissionSubscriptionState
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kontextpermissionsubscriptionstate" title="KontextPermissionSubscriptionState" class="md-nav__link">
    KontextPermissionSubscriptionState
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addpermissionobserver" title="addPermissionObserver" class="md-nav__link">
    addPermissionObserver
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_1" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addsubscriptionobserver" title="addSubscriptionObserver" class="md-nav__link">
    addSubscriptionObserver
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_2" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-observer-details" title="Advanced Observer Details" class="md-nav__link">
    Advanced Observer Details
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#events" title="Events" class="md-nav__link">
    Events
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sendevent" title="sendEvent" class="md-nav__link">
    sendEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sendevents" title="sendEvents" class="md-nav__link">
    sendEvents
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sendscreen" title="sendScreen" class="md-nav__link">
    sendScreen
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#senduserattributes" title="sendUserAttributes" class="md-nav__link">
    sendUserAttributes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data" title="Data" class="md-nav__link">
    Data
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setlocationshared" title="setLocationShared" class="md-nav__link">
    setLocationShared
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#promptlocation" title="promptLocation" class="md-nav__link">
    promptLocation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sending-notifications" title="Sending Notifications" class="md-nav__link">
    Sending Notifications
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#postnotification" title="postNotification" class="md-nav__link">
    postNotification
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clearkontextnotifications" title="ClearKontextNotifications" class="md-nav__link">
    ClearKontextNotifications
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setsubscription" title="setSubscription" class="md-nav__link">
    setSubscription
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#email" title="Email" class="md-nav__link">
    Email
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setemail" title="setEmail" class="md-nav__link">
    setEmail
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logoutemail" title="logoutEmail" class="md-nav__link">
    logoutEmail
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addemailsubscriptionobserver" title="addEmailSubscriptionObserver" class="md-nav__link">
    addEmailSubscriptionObserver
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notifications-events" title="Notifications Events" class="md-nav__link">
    Notifications Events
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kontexthandlenotificationreceivedblock" title="KontextHandleNotificationReceivedBlock" class="md-nav__link">
    KontextHandleNotificationReceivedBlock
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kontexthandlenotificationactionblock" title="KontextHandleNotificationActionBlock" class="md-nav__link">
    KontextHandleNotificationActionBlock
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kontextnotificationopenedresult" title="KontextNotificationOpenedResult" class="md-nav__link">
    KontextNotificationOpenedResult
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kontextnotification" title="KontextNotification" class="md-nav__link">
    KontextNotification
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kontextnotificationaction" title="KontextNotificationAction" class="md-nav__link">
    KontextNotificationAction
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kontextnotificationactiontype" title="KontextNotificationActionType" class="md-nav__link">
    KontextNotificationActionType
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kontextnotificationdisplaytype" title="KontextNotificationDisplayType" class="md-nav__link">
    KontextNotificationDisplayType
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kontextnotificationpayload" title="KontextNotificationPayload" class="md-nav__link">
    KontextNotificationPayload
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debug" title="Debug" class="md-nav__link">
    Debug
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setloglevel" title="setLogLevel" class="md-nav__link">
    setLogLevel
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../push-certificate/" title="Generate an iOS Push Cert" class="md-nav__link">
      Generate an iOS Push Cert
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../troubleshoot/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#initialization" title="Initialization" class="md-nav__link">
    Initialization
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initwithlaunchoptions" title="initWithLaunchOptions" class="md-nav__link">
    initWithLaunchOptions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#privacy" title="Privacy" class="md-nav__link">
    Privacy
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setrequiresuserprivacyconsent" title="setRequiresUserPrivacyConsent" class="md-nav__link">
    setRequiresUserPrivacyConsent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consentgranted" title="consentGranted" class="md-nav__link">
    consentGranted
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requiresuserprivacyconsent" title="requiresUserPrivacyConsent" class="md-nav__link">
    requiresUserPrivacyConsent
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#settings" title="Settings" class="md-nav__link">
    Settings
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kontextsettingskeyautoprompt" title="kontextSettingsKeyAutoPrompt" class="md-nav__link">
    kontextSettingsKeyAutoPrompt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kontextsettingskeyinapplaunchurl" title="kontextSettingsKeyInAppLaunchURL" class="md-nav__link">
    kontextSettingsKeyInAppLaunchURL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#infocusdisplaytype" title="inFocusDisplayType" class="md-nav__link">
    inFocusDisplayType
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#registering-push" title="Registering Push" class="md-nav__link">
    Registering Push
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#promptforpushnotificationswithuserresponse" title="promptForPushNotificationsWithUserResponse" class="md-nav__link">
    promptForPushNotificationsWithUserResponse
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements" title="Requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recommendations" title="Recommendations" class="md-nav__link">
    Recommendations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#status" title="Status" class="md-nav__link">
    Status
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getpermissionsubscriptionstate" title="getPermissionSubscriptionState" class="md-nav__link">
    getPermissionSubscriptionState
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kontextpermissionsubscriptionstate" title="KontextPermissionSubscriptionState" class="md-nav__link">
    KontextPermissionSubscriptionState
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addpermissionobserver" title="addPermissionObserver" class="md-nav__link">
    addPermissionObserver
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_1" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addsubscriptionobserver" title="addSubscriptionObserver" class="md-nav__link">
    addSubscriptionObserver
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_2" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-observer-details" title="Advanced Observer Details" class="md-nav__link">
    Advanced Observer Details
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#events" title="Events" class="md-nav__link">
    Events
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sendevent" title="sendEvent" class="md-nav__link">
    sendEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sendevents" title="sendEvents" class="md-nav__link">
    sendEvents
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sendscreen" title="sendScreen" class="md-nav__link">
    sendScreen
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#senduserattributes" title="sendUserAttributes" class="md-nav__link">
    sendUserAttributes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data" title="Data" class="md-nav__link">
    Data
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setlocationshared" title="setLocationShared" class="md-nav__link">
    setLocationShared
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#promptlocation" title="promptLocation" class="md-nav__link">
    promptLocation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sending-notifications" title="Sending Notifications" class="md-nav__link">
    Sending Notifications
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#postnotification" title="postNotification" class="md-nav__link">
    postNotification
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clearkontextnotifications" title="ClearKontextNotifications" class="md-nav__link">
    ClearKontextNotifications
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setsubscription" title="setSubscription" class="md-nav__link">
    setSubscription
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#email" title="Email" class="md-nav__link">
    Email
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setemail" title="setEmail" class="md-nav__link">
    setEmail
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logoutemail" title="logoutEmail" class="md-nav__link">
    logoutEmail
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addemailsubscriptionobserver" title="addEmailSubscriptionObserver" class="md-nav__link">
    addEmailSubscriptionObserver
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notifications-events" title="Notifications Events" class="md-nav__link">
    Notifications Events
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kontexthandlenotificationreceivedblock" title="KontextHandleNotificationReceivedBlock" class="md-nav__link">
    KontextHandleNotificationReceivedBlock
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kontexthandlenotificationactionblock" title="KontextHandleNotificationActionBlock" class="md-nav__link">
    KontextHandleNotificationActionBlock
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kontextnotificationopenedresult" title="KontextNotificationOpenedResult" class="md-nav__link">
    KontextNotificationOpenedResult
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kontextnotification" title="KontextNotification" class="md-nav__link">
    KontextNotification
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kontextnotificationaction" title="KontextNotificationAction" class="md-nav__link">
    KontextNotificationAction
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kontextnotificationactiontype" title="KontextNotificationActionType" class="md-nav__link">
    KontextNotificationActionType
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kontextnotificationdisplaytype" title="KontextNotificationDisplayType" class="md-nav__link">
    KontextNotificationDisplayType
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kontextnotificationpayload" title="KontextNotificationPayload" class="md-nav__link">
    KontextNotificationPayload
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debug" title="Debug" class="md-nav__link">
    Debug
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setloglevel" title="setLogLevel" class="md-nav__link">
    setLogLevel
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="ios-native-sdk">iOS Native SDK<a class="headerlink" href="#ios-native-sdk" title="Permanent link">&para;</a></h1>
<p>Kontext iOS Native SDK Reference</p>
<div class="admonition info">
<p class="admonition-title">Just starting with iOS?</p>
<p>Check out our <a href="../../iOS/quickstart">iOS SDK Setup</a> guide.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Upgrade to 2.5.1+</p>
<p>A number the methods and classes below were recently added in our 3.5.1 SDK. Make sure you have updated to this version.</p>
</div>
<p>For Developers</p>
<table>
<thead>
<tr>
<th>Calls</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Initialization</td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="#initwithlaunchoptions">initWithLaunchOptions</a></td>
<td>Method</td>
<td>Initialize Kontext</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Privacy</td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="#setrequiresuserprivacyconsent">setRequiresUserPrivacyConsent</a></td>
<td>Mothod</td>
<td></td>
</tr>
<tr>
<td><a href="#consentgranted">consentGranted</a></td>
<td>Mothod</td>
<td></td>
</tr>
<tr>
<td><a href="#requiresuserprivacyconsent">requiresUserPrivacyConsent</a></td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Settings</td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="#kontextsettingskeyautoprompt">KontextSettingsKeyAutoPrompt</a></td>
<td>key</td>
<td></td>
</tr>
<tr>
<td><a href="#kontextsettingskeyinapplaunchurl">KontextSettingsKeyInAppLaunchURL</a></td>
<td>key</td>
<td></td>
</tr>
<tr>
<td><a href="#infocusdisplaytype">inFocusDisplayType</a></td>
<td>Property</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Prompting</td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="#promptforpushnotificationswithuserresponse">promptForPushNotificationsWithUserResponse</a></td>
<td>Method</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Status</td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="#getpermissionsubscriptionstate">getPermissionSubscriptionState</a></td>
<td>Method</td>
<td></td>
</tr>
<tr>
<td><a href="#addpermissionobserver">addPermissionObserver</a></td>
<td>Method</td>
<td></td>
</tr>
<tr>
<td><a href="#addsubscriptionobserver">addSubscriptionObserver</a></td>
<td>Method</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Events</td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="#sendevent">sendEvent</a></td>
<td>Method</td>
<td></td>
</tr>
<tr>
<td><a href="#sendevents">sendEvents</a></td>
<td>Method</td>
<td></td>
</tr>
<tr>
<td><a href="#sendscreen">sendScreen</a></td>
<td>Method</td>
<td></td>
</tr>
<tr>
<td><a href="#senduserattributes">sendUserAttributes</a></td>
<td>Method</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Data</td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="#setlocationshared">setLocationShared</a></td>
<td>Method</td>
<td></td>
</tr>
<tr>
<td><a href="#promptlocation">promptLocation</a></td>
<td>Method</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Sending Notifications</td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="#postnotification">postNotification</a></td>
<td>Method</td>
<td></td>
</tr>
<tr>
<td><a href="#clearkontextnotifications">clearKontextNotifications</a></td>
<td>Method</td>
<td></td>
</tr>
<tr>
<td><a href="#setsubscription">setSubscription</a></td>
<td>Method</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Email</td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="#setemail">setEmail</a></td>
<td>Method</td>
<td></td>
</tr>
<tr>
<td><a href="#logoutemail">logoutEmail</a></td>
<td>Method</td>
<td></td>
</tr>
<tr>
<td><a href="#addemailsubscriptionobserver">addEmailSubscriptionObserver</a></td>
<td>Method</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Notification Events</td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="#kontexthandlenotificationreceivedblock">handleNotificationReceived</a></td>
<td>Method</td>
<td></td>
</tr>
<tr>
<td><a href="#kontexthandlenotificationactionblock">handleNotificationAction</a></td>
<td>Method</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Objects</td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="#kontextnotificationopenedresult">KontextNotificationOpenedResult</a></td>
<td>Object</td>
<td></td>
</tr>
<tr>
<td><a href="#kontextnotification">KontextNotification</a></td>
<td>Object</td>
<td></td>
</tr>
<tr>
<td><a href="#kontextnotificationaction">KontextNotificationAction</a></td>
<td>Object</td>
<td></td>
</tr>
<tr>
<td><a href="#kontextnotificationactiontype">KontextNotificationActionType</a></td>
<td>Object</td>
<td></td>
</tr>
<tr>
<td><a href="#kontextnotificationdisplaytype">KontextNotificationDisplayType</a></td>
<td>Object</td>
<td></td>
</tr>
<tr>
<td><a href="#kontextnotificationpayload">KontextNotificationPayload</a></td>
<td>Object</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Debug</td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="#setloglevel">setLogLevel</a></td>
<td>Mothod</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="initialization">Initialization<a class="headerlink" href="#initialization" title="Permanent link">&para;</a></h2>
<h3 id="initwithlaunchoptions"><code class="codehilite">initWithLaunchOptions</code><a class="headerlink" href="#initwithlaunchoptions" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p>Must be called from <code class="codehilite">didFinishLaunchingWithOptions</code> in <code class="codehilite">AppDelegate.m</code>.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="codehilite">launchOptions</code></td>
<td>NSDictionary*</td>
<td>REQUIRED launchOptions that you received from <code class="codehilite">didFinishLaunchingWithOptions</code></td>
</tr>
<tr>
<td><code class="codehilite">appId</code></td>
<td>NSString*</td>
<td>REQUIRED Your Kontext app id, available in <a href="https://documentation.kontext.in/docs/accounts-and-keys#section-keys-ids">Keys &amp; IDs</a></td>
</tr>
<tr>
<td><code class="codehilite">callback</code></td>
<td><a href="#kontexthandlenotificationreceivedblock">KontextHandleNotificationReceivedBlock</a></td>
<td>Function to be called when a notification is received</td>
</tr>
<tr>
<td><code class="codehilite">callback</code></td>
<td><a href="#kontexthandlenotificationactionblock">KontextHandleNotificationActionBlock</a></td>
<td>Function to be called when a user reacts to a notification received</td>
</tr>
<tr>
<td><code class="codehilite">settings</code></td>
<td>NSDictionary*</td>
<td>Customization settings to change Kontext's default behavior</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">iOS 8+ Notes</p>
<ol>
<li>
<p><code class="codehilite"><span class="n">application</span><span class="o">:</span><span class="n">didRegisterForRemoteNotificationsWithDeviceToken</span><span class="o">:</span></code> will still fire even if KontextSettingsKeyAutoPrompt is set to false.</p>
</li>
<li>
<p>Replace any of your <code class="codehilite">isRegisteredForRemoteNotifications</code> calls with <code class="codehilite">currentUserNotificationSettings</code> or getPermissionSubscriptionState.</p>
</li>
</ol>
</div>
<p>iOS 8+ Notes</p>
<ul>
<li><code class="codehilite"><span class="n">application</span><span class="o">:</span><span class="n">didRegisterForRemoteNotificationsWithDeviceToken</span><span class="o">:</span></code> will still fire even if <code class="codehilite">KontextSettingsKeyAutoPrompt</code> is set to <code class="codehilite">false</code>.</li>
<li>Replace any of your <code class="codehilite">isRegisteredForRemoteNotifications</code> calls with <code class="codehilite">currentUserNotificationSettings</code> or <a href="#getpermissionsubscriptionstate">getPermissionSubscriptionState</a>.</li>
</ul>
<div class="superfences-tabs">
<input name="__tabs_1" type="radio" id="__tab_1_0" checked="checked" />
<label for="__tab_1_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="kc">_</span> <span class="n">application</span><span class="p">:</span> <span class="bp">UIApplication</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span> <span class="n">launchOptions</span><span class="p">:</span> <span class="p">[</span><span class="n">UIApplicationLaunchOptionsKey</span><span class="p">:</span> <span class="nb">Any</span><span class="p">]?)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span> <span class="p">{</span>

   <span class="kd">let</span> <span class="nv">notificationReceivedBlock</span><span class="p">:</span> <span class="n">OSHandleNotificationReceivedBlock</span> <span class="p">=</span> <span class="p">{</span> <span class="n">notification</span> <span class="k">in</span>

      <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Received Notification: </span><span class="si">\(</span><span class="n">notification</span><span class="p">!.</span><span class="n">payload</span><span class="p">.</span><span class="n">notificationID</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
   <span class="p">}</span>

   <span class="kd">let</span> <span class="nv">notificationOpenedBlock</span><span class="p">:</span> <span class="n">OSHandleNotificationActionBlock</span> <span class="p">=</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
      <span class="c1">// This block gets called when the user reacts to a notification received</span>
      <span class="kd">let</span> <span class="nv">payload</span><span class="p">:</span> <span class="n">OSNotificationPayload</span> <span class="p">=</span> <span class="n">result</span><span class="p">!.</span><span class="n">notification</span><span class="p">.</span><span class="n">payload</span>

      <span class="kd">var</span> <span class="nv">fullMessage</span> <span class="p">=</span> <span class="n">payload</span><span class="p">.</span><span class="n">body</span>
      <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Message = </span><span class="si">\(</span><span class="n">fullMessage</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>

      <span class="k">if</span> <span class="n">payload</span><span class="p">.</span><span class="n">additionalData</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
         <span class="k">if</span> <span class="n">payload</span><span class="p">.</span><span class="n">title</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nv">messageTitle</span> <span class="p">=</span> <span class="n">payload</span><span class="p">.</span><span class="n">title</span>
               <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Message Title = </span><span class="si">\(</span><span class="n">messageTitle</span><span class="p">!</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
         <span class="p">}</span>

         <span class="kd">let</span> <span class="nv">additionalData</span> <span class="p">=</span> <span class="n">payload</span><span class="p">.</span><span class="n">additionalData</span>
         <span class="k">if</span> <span class="n">additionalData</span><span class="p">?[</span><span class="s">&quot;actionSelected&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
            <span class="n">fullMessage</span> <span class="p">=</span> <span class="n">fullMessage</span><span class="p">!</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Pressed ButtonID: </span><span class="si">\(</span><span class="n">additionalData</span><span class="p">![</span><span class="s">&quot;actionSelected&quot;</span><span class="p">]</span><span class="si">)</span><span class="s">&quot;</span>
         <span class="p">}</span>
      <span class="p">}</span>
   <span class="p">}</span>

   <span class="kd">let</span> <span class="nv">onesignalInitSettings</span> <span class="p">=</span> <span class="p">[</span><span class="n">kOSSettingsKeyAutoPrompt</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="n">kOSSettingsKeyInAppLaunchURL</span><span class="p">:</span> <span class="kc">true</span><span class="p">]</span>

   <span class="n">Kontext</span><span class="p">.</span><span class="n">initWithLaunchOptions</span><span class="p">(</span><span class="n">launchOptions</span><span class="p">,</span> 
      <span class="n">appId</span><span class="p">:</span> <span class="s">&quot;YOUR_KONTEXT_APP_ID&quot;</span><span class="p">,</span> 
      <span class="n">handleNotificationReceived</span><span class="p">:</span> <span class="n">notificationReceivedBlock</span><span class="p">,</span> 
      <span class="n">handleNotificationAction</span><span class="p">:</span> <span class="n">notificationOpenedBlock</span><span class="p">,</span> 
      <span class="n">settings</span><span class="p">:</span> <span class="n">onesignalInitSettings</span><span class="p">)</span>

   <span class="n">Kontext</span><span class="p">.</span><span class="n">inFocusDisplayType</span> <span class="p">=</span> <span class="n">OSNotificationDisplayType</span><span class="p">.</span><span class="n">notification</span>

   <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_1" type="radio" id="__tab_1_1" />
<label for="__tab_1_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="bp">UIApplication</span><span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFinishLaunchingWithOptions:</span><span class="p">(</span><span class="bp">NSDictionary</span><span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span> <span class="p">{</span>

  <span class="kt">id</span> <span class="n">notificationReceiverBlock</span> <span class="o">=</span> <span class="o">^</span><span class="p">(</span><span class="n">OSNotification</span> <span class="o">*</span><span class="n">notification</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Received Notification - %@&quot;</span><span class="p">,</span> <span class="n">notification</span><span class="p">.</span><span class="n">payload</span><span class="p">.</span><span class="n">notificationID</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="kt">id</span> <span class="n">notificationOpenedBlock</span> <span class="o">=</span> <span class="o">^</span><span class="p">(</span><span class="n">OSNotificationOpenedResult</span> <span class="o">*</span><span class="n">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// This block gets called when the user reacts to a notification received</span>
        <span class="n">OSNotificationPayload</span><span class="o">*</span> <span class="n">payload</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="n">notification</span><span class="p">.</span><span class="n">payload</span><span class="p">;</span>

        <span class="bp">NSString</span><span class="o">*</span> <span class="n">messageTitle</span> <span class="o">=</span> <span class="s">@&quot;Kontext Example&quot;</span><span class="p">;</span>
        <span class="bp">NSString</span><span class="o">*</span> <span class="n">fullMessage</span> <span class="o">=</span> <span class="p">[</span><span class="n">payload</span><span class="p">.</span><span class="n">body</span> <span class="k">copy</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">payload</span><span class="p">.</span><span class="n">additionalData</span><span class="p">)</span> <span class="p">{</span>

            <span class="k">if</span><span class="p">(</span><span class="n">payload</span><span class="p">.</span><span class="n">title</span><span class="p">)</span>
                <span class="n">messageTitle</span> <span class="o">=</span> <span class="n">payload</span><span class="p">.</span><span class="n">title</span><span class="p">;</span>

            <span class="bp">NSDictionary</span><span class="o">*</span> <span class="n">additionalData</span> <span class="o">=</span> <span class="n">payload</span><span class="p">.</span><span class="n">additionalData</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">additionalData</span><span class="p">[</span><span class="s">@&quot;actionSelected&quot;</span><span class="p">])</span>
                <span class="n">fullMessage</span> <span class="o">=</span> <span class="p">[</span><span class="n">fullMessage</span> <span class="nl">stringByAppendingString</span><span class="p">:[</span><span class="bp">NSString</span> <span class="nl">stringWithFormat</span><span class="p">:</span><span class="s">@&quot;</span><span class="se">\n</span><span class="s">Pressed ButtonId:%@&quot;</span><span class="p">,</span> <span class="n">additionalData</span><span class="p">[</span><span class="s">@&quot;actionSelected&quot;</span><span class="p">]]];</span>
        <span class="p">}</span>

        <span class="bp">UIAlertView</span><span class="o">*</span> <span class="n">alertView</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">UIAlertView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithTitle</span><span class="p">:</span><span class="n">messageTitle</span>
                                                            <span class="nl">message</span><span class="p">:</span><span class="n">fullMessage</span>
                                                           <span class="nl">delegate</span><span class="p">:</span><span class="nb">self</span>
                                                  <span class="nl">cancelButtonTitle</span><span class="p">:</span><span class="s">@&quot;Close&quot;</span>
                                                  <span class="nl">otherButtonTitles</span><span class="p">:</span><span class="nb">nil</span><span class="p">,</span> <span class="nb">nil</span><span class="p">];</span>
        <span class="p">[</span><span class="n">alertView</span> <span class="n">show</span><span class="p">];</span>

   <span class="p">};</span>

   <span class="kt">id</span> <span class="n">onesignalInitSettings</span> <span class="o">=</span> <span class="l">@{</span><span class="nl">kOSSettingsKeyAutoPrompt</span> <span class="p">:</span> <span class="m">@YES</span><span class="l">}</span><span class="p">;</span>

   <span class="p">[</span><span class="n">Kontext</span> <span class="nl">initWithLaunchOptions</span><span class="p">:</span><span class="n">launchOptions</span>
                              <span class="nl">appId</span><span class="p">:</span><span class="s">@&quot;YOUR_KONTEXT_APP_ID&quot;</span>
         <span class="nl">handleNotificationReceived</span><span class="p">:</span><span class="n">notificationReceiverBlock</span>
           <span class="nl">handleNotificationAction</span><span class="p">:</span><span class="n">notificationOpenedBlock</span>
                           <span class="nl">settings</span><span class="p">:</span><span class="n">onesignalInitSettings</span><span class="p">];</span>

<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<h2 id="privacy">Privacy<a class="headerlink" href="#privacy" title="Permanent link">&para;</a></h2>
<h3 id="setrequiresuserprivacyconsent"><code class="codehilite">setRequiresUserPrivacyConsent</code><a class="headerlink" href="#setrequiresuserprivacyconsent" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p>For GDPR users, your application should call this method <em>before</em> initialization of the SDK. If you pass in <code class="codehilite">true</code>, your application will need to call <code class="codehilite">provideConsent(true)</code> before the Kontext SDK gets fully initialized. Until this happens, you can continue to call methods (such as <code class="codehilite">sendEvents()</code>), but nothing will happen.</p>
<div class="superfences-tabs">
<input name="__tabs_2" type="radio" id="__tab_2_0" checked="checked" />
<label for="__tab_2_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1">//to require the user&#39;s consent before the SDK initializes</span>
<span class="n">Kontext</span><span class="p">.</span><span class="n">setRequiresUserPrivacyConsent</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="n">Kontext</span><span class="p">.</span><span class="n">initWithLaunchOptions</span><span class="p">(</span><span class="n">launchOptions</span><span class="p">,</span> <span class="n">appId</span><span class="p">:</span> <span class="s">&quot;YOUR_KONTEXT_APP_ID&quot;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_2" type="radio" id="__tab_2_1" />
<label for="__tab_2_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1">//to require the user&#39;s consent before the SDK initializes</span>
<span class="p">[</span><span class="n">Kontext</span> <span class="nl">setRequiresUserPrivacyConsent</span><span class="p">:</span><span class="nb">true</span><span class="p">];</span>

<span class="p">[</span><span class="n">Kontext</span> <span class="nl">initWithLaunchOptions</span><span class="p">:</span><span class="n">launchOptions</span> <span class="nl">appId</span><span class="p">:</span><span class="s">@&quot;YOUR_KONTEXT_APP_ID&quot;</span><span class="p">];</span>
</pre></div>
</td></tr></table></div>
</div>
<h3 id="consentgranted"><code class="codehilite">consentGranted</code><a class="headerlink" href="#consentgranted" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p>If you set the SDK to require the user's privacy consent, your application can use this method once the user does or doesn't provide privacy consent to use the Kontext SDK.</p>
<div class="superfences-tabs">
<input name="__tabs_3" type="radio" id="__tab_3_0" checked="checked" />
<label for="__tab_3_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kr">@IBAction</span> <span class="kd">func</span> <span class="nf">userTappedProvideConsentButton</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span> <span class="p">:</span> <span class="bp">UIButton</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">//this will complete the initialization of the SDK</span>
    <span class="n">Kontext</span><span class="p">.</span><span class="n">provideConsent</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span> 
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_3" type="radio" id="__tab_3_1" />
<label for="__tab_3_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">IBAction</span><span class="p">)</span><span class="nf">setEmailButtonPressed:</span><span class="p">(</span><span class="bp">UIButton</span> <span class="o">*</span><span class="p">)</span><span class="nv">sender</span> <span class="p">{</span>
  <span class="c1">//this will complete the initialization of the SDK</span>
  <span class="p">[</span><span class="n">Kontext</span> <span class="nl">provideConsent</span><span class="p">:</span><span class="nb">true</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<h3 id="requiresuserprivacyconsent"><code class="codehilite">requiresUserPrivacyConsent</code><a class="headerlink" href="#requiresuserprivacyconsent" title="Permanent link">&para;</a></h3>
<p>BOOLEAN</p>
<p>You can use this property to check if the Kontext SDK is waiting for the user to provide privacy consent.</p>
<p><code class="codehilite">true</code> - Indicates that the Kontext SDK hasn't received the user's privacy consent yet
<code class="codehilite">false</code> - Either the user has already provided consent, or your app isn't set to require consent.</p>
<h2 id="settings">Settings<a class="headerlink" href="#settings" title="Permanent link">&para;</a></h2>
<h3 id="kontextsettingskeyautoprompt"><code class="codehilite">kontextSettingsKeyAutoPrompt</code><a class="headerlink" href="#kontextsettingskeyautoprompt" title="Permanent link">&para;</a></h3>
<p>KEY</p>
<p><code class="codehilite">true</code> (DEFAULT) - automatically prompts for notifications permissions.
<code class="codehilite">false</code> - disables auto prompt.</p>
<h3 id="kontextsettingskeyinapplaunchurl"><code class="codehilite">kontextSettingsKeyInAppLaunchURL</code><a class="headerlink" href="#kontextsettingskeyinapplaunchurl" title="Permanent link">&para;</a></h3>
<p>KEY</p>
<p><code class="codehilite">true</code> (DEFAULT) - Open all URLs with a in-app WebView window.
<code class="codehilite">false</code> - Launches Safari with the URL OR other app (if deep linked or custom URL scheme passed).</p>
<h3 id="infocusdisplaytype"><code class="codehilite">inFocusDisplayType</code><a class="headerlink" href="#infocusdisplaytype" title="Permanent link">&para;</a></h3>
<p>PROPERTY</p>
<p>Setting to control how Kontext notifications will be shown when one is received while your app is in focus, for apps targeting.</p>
<p><code class="codehilite">KontextNotificationDisplayTypeNotification</code> - Native notification display
<code class="codehilite">KontextNotificationDisplayTypeInAppAlert</code> (DEFAULT) - Alert dialog display.
<code class="codehilite">KontextNotificationDisplayTypeNone</code> - Notification is silent and not shown</p>
<p><strong>Swift format:</strong>
<code class="codehilite">KontextNotificationDisplayType.notification</code>
<code class="codehilite">KontextNotificationDisplayType.inAppAlert</code>
<code class="codehilite">KontextNotificationDisplayType.none</code></p>
<div class="superfences-tabs">
<input name="__tabs_4" type="radio" id="__tab_4_0" checked="checked" />
<label for="__tab_4_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Kontext</span><span class="p">.</span><span class="n">inFocusDisplayType</span> <span class="p">=</span> <span class="n">OSNotificationDisplayType</span><span class="p">.</span><span class="n">notification</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_4" type="radio" id="__tab_4_1" />
<label for="__tab_4_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Kontext</span><span class="p">.</span><span class="n">inFocusDisplayType</span> <span class="o">=</span> <span class="n">OSNotificationDisplayTypeNotification</span><span class="p">;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="admonition warning">
<p class="admonition-title">iOS 9 and below</p>
<p>The Notification setting will fall back to InAppAlert .</p>
</div>
<h2 id="registering-push">Registering Push<a class="headerlink" href="#registering-push" title="Permanent link">&para;</a></h2>
<h3 id="promptforpushnotificationswithuserresponse"><code class="codehilite">promptForPushNotificationsWithUserResponse</code><a class="headerlink" href="#promptforpushnotificationswithuserresponse" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p>Prompt the user for notification permissions. Callback fires as soon as the user accepts or declines notifications.</p>
<h4 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h4>
<p>Must set <code class="codehilite">kontextSettingsKeyAutoPrompt</code> to <code class="codehilite">false</code> when calling <a href="#initwithlaunchoptions">initWithLaunchOptions</a>.</p>
<h4 id="recommendations">Recommendations<a class="headerlink" href="#recommendations" title="Permanent link">&para;</a></h4>
<p>You can only prompt once so it is recommend to explain what benefits notifications will give the user.</p>
<h4 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h4>
<div class="superfences-tabs">
<input name="__tabs_5" type="radio" id="__tab_5_0" checked="checked" />
<label for="__tab_5_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1">// Call when you want to prompt the user to accept push notifications. </span>
<span class="c1">// Only call once and only if you set kOSSettingsKeyAutoPrompt in AppDelegate to false.</span>
<span class="n">Kontext</span><span class="p">.</span><span class="n">promptForPushNotifications</span><span class="p">(</span><span class="n">userResponse</span><span class="p">:</span> <span class="p">{</span> <span class="n">accepted</span> <span class="k">in</span>
   <span class="bp">print</span><span class="p">(</span><span class="s">&quot;User accepted notifications: </span><span class="si">\(</span><span class="n">accepted</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_5" type="radio" id="__tab_5_1" />
<label for="__tab_5_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">[</span><span class="n">Kontext</span> <span class="nl">promptForPushNotificationsWithUserResponse</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="kt">BOOL</span> <span class="n">accepted</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Accepted Notifications?: %d&quot;</span><span class="p">,</span> <span class="n">accepted</span><span class="p">);</span>
<span class="p">}];</span>
</pre></div>
</td></tr></table></div>
</div>
<h2 id="status">Status<a class="headerlink" href="#status" title="Permanent link">&para;</a></h2>
<h3 id="getpermissionsubscriptionstate"><code class="codehilite">getPermissionSubscriptionState</code><a class="headerlink" href="#getpermissionsubscriptionstate" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p>Get the current notification and permission state. Returns a <code class="codehilite">KontextPermissionSubscriptionState</code> type described below.</p>
<h4 id="kontextpermissionsubscriptionstate">KontextPermissionSubscriptionState<a class="headerlink" href="#kontextpermissionsubscriptionstate" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="codehilite">permissionStatus</code></td>
<td>KontextPermissionState*</td>
<td>iKontext Notification Permissions state</td>
</tr>
<tr>
<td><code class="codehilite">subscriptionStatus</code></td>
<td>KontextSubscriptionState*</td>
<td>Apple and Kontext subscription state</td>
</tr>
</tbody>
</table>
<div class="superfences-tabs">
<input name="__tabs_6" type="radio" id="__tab_6_0" checked="checked" />
<label for="__tab_6_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">status</span><span class="p">:</span> <span class="n">OSPermissionSubscriptionState</span> <span class="p">=</span> <span class="n">Kontext</span><span class="p">.</span><span class="n">getPermissionSubscriptionState</span><span class="p">()</span>

<span class="kd">let</span> <span class="nv">hasPrompted</span> <span class="p">=</span> <span class="n">status</span><span class="p">.</span><span class="n">permissionStatus</span><span class="p">.</span><span class="n">hasPrompted</span>
<span class="bp">print</span><span class="p">(</span><span class="s">&quot;hasPrompted = </span><span class="si">\(</span><span class="n">hasPrompted</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">userStatus</span> <span class="p">=</span> <span class="n">status</span><span class="p">.</span><span class="n">permissionStatus</span><span class="p">.</span><span class="n">status</span>
<span class="bp">print</span><span class="p">(</span><span class="s">&quot;userStatus = </span><span class="si">\(</span><span class="n">userStatus</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>

<span class="kd">let</span> <span class="nv">isSubscribed</span> <span class="p">=</span> <span class="n">status</span><span class="p">.</span><span class="n">subscriptionStatus</span><span class="p">.</span><span class="n">subscribed</span>
<span class="bp">print</span><span class="p">(</span><span class="s">&quot;isSubscribed = </span><span class="si">\(</span><span class="n">isSubscribed</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">userSubscriptionSetting</span> <span class="p">=</span> <span class="n">status</span><span class="p">.</span><span class="n">subscriptionStatus</span><span class="p">.</span><span class="n">userSubscriptionSetting</span>
<span class="bp">print</span><span class="p">(</span><span class="s">&quot;userSubscriptionSetting = </span><span class="si">\(</span><span class="n">userSubscriptionSetting</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">userID</span> <span class="p">=</span> <span class="n">status</span><span class="p">.</span><span class="n">subscriptionStatus</span><span class="p">.</span><span class="n">userId</span>
<span class="bp">print</span><span class="p">(</span><span class="s">&quot;userID = </span><span class="si">\(</span><span class="n">userID</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">pushToken</span> <span class="p">=</span> <span class="n">status</span><span class="p">.</span><span class="n">subscriptionStatus</span><span class="p">.</span><span class="n">pushToken</span>
<span class="bp">print</span><span class="p">(</span><span class="s">&quot;pushToken = </span><span class="si">\(</span><span class="n">pushToken</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_6" type="radio" id="__tab_6_1" />
<label for="__tab_6_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">OSPermissionSubscriptionState</span><span class="o">*</span> <span class="n">status</span> <span class="o">=</span> <span class="p">[</span><span class="n">Kontext</span> <span class="n">getPermissionSubscriptionState</span><span class="p">];</span>
<span class="n">status</span><span class="p">.</span><span class="n">permissionStatus</span><span class="p">.</span><span class="n">hasPrompted</span><span class="p">;</span>
<span class="n">status</span><span class="p">.</span><span class="n">permissionStatus</span><span class="p">.</span><span class="n">status</span><span class="p">;</span>

<span class="n">status</span><span class="p">.</span><span class="n">subscriptionStatus</span><span class="p">.</span><span class="n">subscribed</span><span class="p">;</span>
<span class="n">status</span><span class="p">.</span><span class="n">subscriptionStatus</span><span class="p">.</span><span class="n">userSubscriptionSetting</span><span class="p">;</span>
<span class="n">status</span><span class="p">.</span><span class="n">subscriptionStatus</span><span class="p">.</span><span class="n">userId</span><span class="p">;</span>
<span class="n">status</span><span class="p">.</span><span class="n">subscriptionStatus</span><span class="p">.</span><span class="n">pushToken</span><span class="p">;</span>
</pre></div>
</td></tr></table></div>
</div>
<h3 id="addpermissionobserver"><code class="codehilite">addPermissionObserver</code><a class="headerlink" href="#addpermissionobserver" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p>The <code class="codehilite">onKontextPermissionChanged</code> method will be fired on the passed in object when a notification permission setting changes.
This includes the following events: </p>
<ul>
<li>Notification permission prompt shown</li>
<li>The user accepting or declining the permission prompt</li>
<li>Enabling/disabling notifications for your app in the iKontext Settings after returning to your app.</li>
</ul>
<h4 id="example_1">Example<a class="headerlink" href="#example_1" title="Permanent link">&para;</a></h4>
<p>Example of setting up with your AppDelegate.
Output is showings the user accepting the notification permission prompt.</p>
<div class="superfences-tabs">
<input name="__tabs_7" type="radio" id="__tab_7_0" checked="checked" />
<label for="__tab_7_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1">// AppDelegate.swift</span>
<span class="c1">// Add OSPermissionObserver after UIApplicationDelegate</span>
<span class="kd">class</span> <span class="nc">AppDelegate</span><span class="p">:</span> <span class="bp">UIResponder</span><span class="p">,</span> <span class="bp">UIApplicationDelegate</span><span class="p">,</span> <span class="n">OSPermissionObserver</span> <span class="p">{</span>

   <span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="kc">_</span> <span class="n">application</span><span class="p">:</span> <span class="bp">UIApplication</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span> <span class="n">launchOptions</span><span class="p">:</span> <span class="p">[</span><span class="n">UIApplicationLaunchOptionsKey</span><span class="p">:</span> <span class="nb">Any</span><span class="p">]?)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span> <span class="p">{</span>
      <span class="c1">// Add your AppDelegate as an obsserver</span>
      <span class="n">Kontext</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="kc">self</span> <span class="k">as</span> <span class="n">OSPermissionObserver</span><span class="p">)</span>
   <span class="p">}</span>

   <span class="c1">// Add this new method</span>
   <span class="kd">func</span> <span class="nf">onOSPermissionChanged</span><span class="p">(</span><span class="kc">_</span> <span class="n">stateChanges</span><span class="p">:</span> <span class="n">OSPermissionStateChanges</span><span class="p">!)</span> <span class="p">{</span>
      <span class="c1">// Example of detecting answering the permission prompt</span>
      <span class="k">if</span> <span class="n">stateChanges</span><span class="p">.</span><span class="n">from</span><span class="p">.</span><span class="n">status</span> <span class="p">==</span> <span class="n">OSNotificationPermission</span><span class="p">.</span><span class="n">notDetermined</span> <span class="p">{</span>
         <span class="k">if</span> <span class="n">stateChanges</span><span class="p">.</span><span class="n">to</span><span class="p">.</span><span class="n">status</span> <span class="p">==</span> <span class="n">OSNotificationPermission</span><span class="p">.</span><span class="n">authorized</span> <span class="p">{</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Thanks for accepting notifications!&quot;</span><span class="p">)</span>
         <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">stateChanges</span><span class="p">.</span><span class="n">to</span><span class="p">.</span><span class="n">status</span> <span class="p">==</span> <span class="n">OSNotificationPermission</span><span class="p">.</span><span class="n">denied</span> <span class="p">{</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Notifications not accepted. You can turn them on later under your iOS settings.&quot;</span><span class="p">)</span>
         <span class="p">}</span>
      <span class="p">}</span>
      <span class="c1">// prints out all properties</span>
      <span class="bp">print</span><span class="p">(</span><span class="s">&quot;PermissionStateChanges: </span><span class="se">\n</span><span class="si">\(</span><span class="n">stateChanges</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
   <span class="p">}</span>

   <span class="c1">// Output:</span>
   <span class="cm">/*</span>
<span class="cm">   Thanks for accepting notifications!</span>
<span class="cm">   PermissionStateChanges:</span>
<span class="cm">   Optional(&lt;OSSubscriptionStateChanges:</span>
<span class="cm">   from: &lt;OSPermissionState: hasPrompted: 0, status: NotDetermined&gt;,</span>
<span class="cm">   to:   &lt;OSPermissionState: hasPrompted: 1, status: Authorized&gt;</span>
<span class="cm">   &gt;</span>
<span class="cm">   */</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_7" type="radio" id="__tab_7_1" />
<label for="__tab_7_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1">// AppDelegate.h</span>
<span class="c1">// Add OSPermissionObserver after UIApplicationDelegate</span>
<span class="k">@interface</span> <span class="nc">AppDelegate</span> : <span class="bp">UIResponder</span> <span class="o">&lt;</span><span class="bp">UIApplicationDelegate</span><span class="p">,</span> <span class="n">OSPermissionObserver</span><span class="o">&gt;</span>
<span class="k">@end</span>

<span class="c1">// AppDelegate.m</span>
<span class="k">@implementation</span> <span class="nc">AppDelegate</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="bp">UIApplication</span><span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFinishLaunchingWithOptions:</span><span class="p">(</span><span class="bp">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span> <span class="p">{</span>
  <span class="c1">// Add your AppDelegate as an obsserver</span>
  <span class="p">[</span><span class="n">Kontext</span> <span class="nl">addPermissionObserver</span><span class="p">:</span><span class="nb">self</span><span class="p">];</span>
<span class="p">}</span>

<span class="c1">// Add this new method</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onOSPermissionChanged:</span><span class="p">(</span><span class="n">OSPermissionStateChanges</span><span class="o">*</span><span class="p">)</span><span class="nv">stateChanges</span> <span class="p">{</span>

    <span class="c1">// Example of detecting anwsering the permission prompt</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">stateChanges</span><span class="p">.</span><span class="n">from</span><span class="p">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">OSNotificationPermissionNotDetermined</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">stateChanges</span><span class="p">.</span><span class="n">to</span><span class="p">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">OSNotificationPermissionAuthorized</span><span class="p">)</span>
         <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Thanks for accepting notifications!&quot;</span><span class="p">);</span>
      <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">stateChanges</span><span class="p">.</span><span class="n">to</span><span class="p">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">OSNotificationPermissionDenied</span><span class="p">)</span>
         <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Notifications not accepted. You can turn them on later under your iOS settings.&quot;</span><span class="p">);</span>
    <span class="p">}</span>

   <span class="c1">// prints out all properties </span>
   <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;PermissionStateChanges:</span><span class="se">\n</span><span class="s">%@&quot;</span><span class="p">,</span> <span class="n">stateChanges</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Output:</span>
<span class="cm">/*</span>
<span class="cm">Thanks for accepting notifications!</span>
<span class="cm">PermissionStateChanges:</span>
<span class="cm">&lt;OSSubscriptionStateChanges:</span>
<span class="cm">from: &lt;OSPermissionState: hasPrompted: 1, status: NotDetermined&gt;,</span>
<span class="cm">to:   &lt;OSPermissionState: hasPrompted: 1, status: Authorized&gt;</span>
<span class="cm">&gt;</span>
<span class="cm">*/</span>

<span class="k">@end</span>
</pre></div>
</td></tr></table></div>
</div>
<h3 id="addsubscriptionobserver"><code class="codehilite">addSubscriptionObserver</code><a class="headerlink" href="#addsubscriptionobserver" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p>The <code class="codehilite">onKontextSubscriptionChanged</code> method will be fired on the passed in object when a notification subscription property changes.</p>
<p>This includes the following events:</p>
<ul>
<li>Getting a push token from Apple</li>
<li>Getting a player / user id from Kontext</li>
<li><code class="codehilite">Kontext.setSubscription</code> is called</li>
<li>User disables or enables notifications</li>
</ul>
<h4 id="example_2">Example<a class="headerlink" href="#example_2" title="Permanent link">&para;</a></h4>
<p>Example of setting up with your AppDelegate. Output is showing the capture the device subscribing to Kontext.</p>
<div class="superfences-tabs">
<input name="__tabs_8" type="radio" id="__tab_8_0" checked="checked" />
<label for="__tab_8_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1">// AppDelegate.swift</span>
<span class="c1">// Add OSSubscriptionObserver after UIApplicationDelegate</span>
<span class="kd">class</span> <span class="nc">AppDelegate</span><span class="p">:</span> <span class="bp">UIResponder</span><span class="p">,</span> <span class="bp">UIApplicationDelegate</span><span class="p">,</span> <span class="n">OSSubscriptionObserver</span> <span class="p">{</span>

   <span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="kc">_</span> <span class="n">application</span><span class="p">:</span> <span class="bp">UIApplication</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span> <span class="n">launchOptions</span><span class="p">:</span> <span class="p">[</span><span class="n">UIApplicationLaunchOptionsKey</span><span class="p">:</span> <span class="nb">Any</span><span class="p">]?)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span> <span class="p">{</span>
      <span class="c1">// Add your AppDelegate as an obsserver</span>
      <span class="n">Kontext</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="kc">self</span> <span class="k">as</span> <span class="n">OSSubscriptionObserver</span><span class="p">)</span>
   <span class="p">}</span>

   <span class="c1">// Add this new method</span>
   <span class="kd">func</span> <span class="nf">onOSSubscriptionChanged</span><span class="p">(</span><span class="kc">_</span> <span class="n">stateChanges</span><span class="p">:</span> <span class="n">OSSubscriptionStateChanges</span><span class="p">!)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="o">!</span><span class="n">stateChanges</span><span class="p">.</span><span class="n">from</span><span class="p">.</span><span class="n">subscribed</span> <span class="o">&amp;&amp;</span> <span class="n">stateChanges</span><span class="p">.</span><span class="n">to</span><span class="p">.</span><span class="n">subscribed</span> <span class="p">{</span>
         <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Subscribed for Kontext push notifications!&quot;</span><span class="p">)</span>
         <span class="c1">// get player ID</span>
         <span class="n">stateChanges</span><span class="p">.</span><span class="n">to</span><span class="p">.</span><span class="n">userId</span>
      <span class="p">}</span>
      <span class="bp">print</span><span class="p">(</span><span class="s">&quot;SubscriptionStateChange: </span><span class="se">\n</span><span class="si">\(</span><span class="n">stateChanges</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
   <span class="p">}</span>

   <span class="c1">// Output:</span>
   <span class="cm">/*</span>
<span class="cm">   Subscribed for Kontext push notifications!</span>
<span class="cm">   PermissionStateChanges:</span>
<span class="cm">   Optional(&lt;OSSubscriptionStateChanges:</span>
<span class="cm">   from: &lt;OSSubscriptionState: userId: (null), pushToken: 0000000000000000000000000000000000000000000000000000000000000000 userSubscriptionSetting: 1, subscribed: 0&gt;,</span>
<span class="cm">   to:   &lt;OSSubscriptionState: userId: 11111111-222-333-444-555555555555, pushToken: 0000000000000000000000000000000000000000000000000000000000000000, userSubscriptionSetting: 1, subscribed: 1&gt;</span>
<span class="cm">   &gt;</span>
<span class="cm">   */</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_8" type="radio" id="__tab_8_1" />
<label for="__tab_8_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1">// AppDelegate.h</span>
<span class="c1">// Add OSSubscriptionObserver after UIApplicationDelegate</span>
<span class="k">@interface</span> <span class="nc">AppDelegate</span> : <span class="bp">UIResponder</span> <span class="o">&lt;</span><span class="bp">UIApplicationDelegate</span><span class="p">,</span> <span class="n">OSSubscriptionObserver</span><span class="o">&gt;</span>
<span class="k">@end</span>

<span class="c1">// AppDelegate.m</span>
<span class="k">@implementation</span> <span class="nc">AppDelegate</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="bp">UIApplication</span><span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFinishLaunchingWithOptions:</span><span class="p">(</span><span class="bp">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span> <span class="p">{</span>
  <span class="c1">// Add your AppDelegate as an obsserver</span>
  <span class="p">[</span><span class="n">Kontext</span> <span class="nl">addSubscriptionObserver</span><span class="p">:</span><span class="nb">self</span><span class="p">];</span>
<span class="p">}</span>

<span class="c1">// Add this new method</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onOSSubscriptionChanged:</span><span class="p">(</span><span class="n">OSSubscriptionStateChanges</span><span class="o">*</span><span class="p">)</span><span class="nv">stateChanges</span> <span class="p">{</span>

    <span class="c1">// Example of detecting subscribing to Kontext</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">stateChanges</span><span class="p">.</span><span class="n">from</span><span class="p">.</span><span class="n">subscribed</span> <span class="o">&amp;&amp;</span> <span class="n">stateChanges</span><span class="p">.</span><span class="n">to</span><span class="p">.</span><span class="n">subscribed</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Subscribed for Kontext push notifications!&quot;</span><span class="p">);</span>
      <span class="c1">// get player ID</span>
      <span class="n">stateChanges</span><span class="p">.</span><span class="n">to</span><span class="p">.</span><span class="n">userId</span><span class="p">;</span>
    <span class="p">}</span>

   <span class="c1">// prints out all properties</span>
   <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;SubscriptionStateChanges:</span><span class="se">\n</span><span class="s">%@&quot;</span><span class="p">,</span> <span class="n">stateChanges</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Output:</span>
<span class="cm">/*</span>
<span class="cm">Subscribed for Kontext push notifications!</span>
<span class="cm">PermissionStateChanges:</span>
<span class="cm">&lt;OSSubscriptionStateChanges:</span>
<span class="cm">from: &lt;OSSubscriptionState: userId: (null), pushToken: 0000000000000000000000000000000000000000000000000000000000000000 userSubscriptionSetting: 1, subscribed: 0&gt;,</span>
<span class="cm">to:   &lt;OSSubscriptionState: userId: 11111111-222-333-444-555555555555, pushToken: 0000000000000000000000000000000000000000000000000000000000000000, userSubscriptionSetting: 1, subscribed: 1&gt;</span>
<span class="cm">&gt;</span>
<span class="cm">*/</span>

<span class="k">@end</span>
</pre></div>
</td></tr></table></div>
</div>
<h4 id="advanced-observer-details">Advanced Observer Details<a class="headerlink" href="#advanced-observer-details" title="Permanent link">&para;</a></h4>
<p>Any object implementing the <code class="codehilite">KontextPermissionObserver</code> and/or the <code class="codehilite">KontextSubscriptionObserver</code> protocols can be added as an observer. You can call <code class="codehilite">removePermissionObserver</code> to remove any existing listeners.
Kontext uses a weak reference to the observer to prevent leaks.</p>
<h2 id="events">Events<a class="headerlink" href="#events" title="Permanent link">&para;</a></h2>
<h3 id="sendevent"><code class="codehilite">sendEvent</code><a class="headerlink" href="#sendevent" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p>Tag a user based on an app event of your choosing so later you can create segments on <a href="https://app.kontext.in/">Kontext platform</a> to target these users. Recommend using sendEvents over sendEvent if you need to set more than one tag on a user at a time.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="codehilite">key</code></td>
<td>NSString*</td>
<td>Key of your choosing to create or update</td>
</tr>
<tr>
<td><code class="codehilite">value</code></td>
<td>NSString*</td>
<td>Value to set on the key.</td>
</tr>
<tr>
<td><code class="codehilite">onSuccess(Optional)</code></td>
<td>KontextResultSuccessBlock</td>
<td>Call if there were no errors sending the tag</td>
</tr>
<tr>
<td><code class="codehilite">onFailure(Optional)</code></td>
<td>KontextFailureBlock</td>
<td>Called if there was an error</td>
</tr>
</tbody>
</table>
<div class="superfences-tabs">
<input name="__tabs_9" type="radio" id="__tab_9_0" checked="checked" />
<label for="__tab_9_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Kontext</span><span class="p">.</span><span class="n">sendEvent</span><span class="p">(</span><span class="s">&quot;key&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="s">&quot;value&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_9" type="radio" id="__tab_9_1" />
<label for="__tab_9_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">[</span><span class="n">Kontext</span> <span class="nl">sendEvent</span><span class="p">:</span><span class="s">@&quot;key&quot;</span> <span class="nl">value</span><span class="p">:</span><span class="s">@&quot;value&quot;</span><span class="p">];</span>
</pre></div>
</td></tr></table></div>
</div>
<h3 id="sendevents"><code class="codehilite">sendEvents</code><a class="headerlink" href="#sendevents" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p>Tag a user based on an app event of your choosing so later you can create segments on <a href="https://app.kontext.in/">Kontext platform</a> to target these users.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="codehilite">keyValues</code></td>
<td>NSDictionary*</td>
<td>Key value pairs of your choosing to create or update.</td>
</tr>
<tr>
<td><code class="codehilite">onSuccess(Optional)</code></td>
<td>KontextResultSuccessBlock</td>
<td>Call if there were no errors sending the tag</td>
</tr>
<tr>
<td><code class="codehilite">onFailure(Optional)</code></td>
<td>KontextFailureBlock</td>
<td>Called if there was an error</td>
</tr>
</tbody>
</table>
<div class="superfences-tabs">
<input name="__tabs_10" type="radio" id="__tab_10_0" checked="checked" />
<label for="__tab_10_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Kontext</span><span class="p">.</span><span class="n">sendEvents</span><span class="p">([</span><span class="s">&quot;key1&quot;</span><span class="p">:</span> <span class="s">&quot;value1&quot;</span><span class="p">,</span> <span class="s">&quot;key2&quot;</span><span class="p">:</span> <span class="s">&quot;value2&quot;</span><span class="p">])</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_10" type="radio" id="__tab_10_1" />
<label for="__tab_10_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">[</span><span class="n">Kontext</span> <span class="nl">sendEvents</span><span class="p">:</span><span class="l">@{</span><span class="s">@&quot;key1&quot;</span> <span class="o">:</span> <span class="s">@&quot;value1&quot;</span><span class="p">,</span> <span class="s">@&quot;key2&quot;</span> <span class="o">:</span> <span class="s">@&quot;value2&quot;</span><span class="l">}</span><span class="p">];</span>
</pre></div>
</td></tr></table></div>
</div>
<h3 id="sendscreen"><code class="codehilite">sendScreen</code><a class="headerlink" href="#sendscreen" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p>Tag a user based on an app event of your choosing so later you can create segments on <a href="https://app.kontext.in/">Kontext platform</a> to target these users. Recommend using sendEvents over sendEvent if you need to set more than one tag on a user at a time.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="codehilite">value</code></td>
<td>NSString*</td>
<td>Value to screen.</td>
</tr>
<tr>
<td><code class="codehilite">onSuccess(Optional)</code></td>
<td>KontextResultSuccessBlock</td>
<td>Call if there were no errors sending the tag</td>
</tr>
<tr>
<td><code class="codehilite">onFailure(Optional)</code></td>
<td>KontextFailureBlock</td>
<td>Called if there was an error</td>
</tr>
</tbody>
</table>
<div class="superfences-tabs">
<input name="__tabs_11" type="radio" id="__tab_11_0" checked="checked" />
<label for="__tab_11_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Kontext</span><span class="p">.</span><span class="n">sendScreen</span><span class="p">(</span><span class="s">&quot;ScreenName&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_11" type="radio" id="__tab_11_1" />
<label for="__tab_11_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">[</span><span class="n">Kontext</span> <span class="nl">sendScreen</span><span class="p">:</span><span class="s">@&quot;ScreenName&quot;</span><span class="p">];</span>
</pre></div>
</td></tr></table></div>
</div>
<h3 id="senduserattributes"><code class="codehilite">sendUserAttributes</code><a class="headerlink" href="#senduserattributes" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p>Tag a user based on an app event of your choosing so later you can create segments on <a href="https://app.kontext.in/">Kontext platform</a> to target these users.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="codehilite">keyValues</code></td>
<td>NSDictionary*</td>
<td>Key value pairs of your choosing to create or update.</td>
</tr>
<tr>
<td><code class="codehilite">onSuccess(Optional)</code></td>
<td>KontextResultSuccessBlock</td>
<td>Call if there were no errors sending the tag</td>
</tr>
<tr>
<td><code class="codehilite">onFailure(Optional)</code></td>
<td>KontextFailureBlock</td>
<td>Called if there was an error</td>
</tr>
</tbody>
</table>
<div class="superfences-tabs">
<input name="__tabs_12" type="radio" id="__tab_12_0" checked="checked" />
<label for="__tab_12_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Kontext</span><span class="p">.</span><span class="n">sendEvents</span><span class="p">([</span><span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;Jhon Doe&quot;</span><span class="p">,</span> <span class="s">&quot;age&quot;</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span> <span class="s">&quot;gender&quot;</span><span class="p">:</span> <span class="s">&quot;M&quot;</span><span class="p">,</span> <span class="s">&quot;city&quot;</span><span class="p">:</span> <span class="s">&quot;Pune&quot;</span><span class="p">])</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_12" type="radio" id="__tab_12_1" />
<label for="__tab_12_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">[</span><span class="n">Kontext</span> <span class="nl">sendEvents</span><span class="p">:</span><span class="l">@{</span><span class="s">@&quot;name&quot;</span><span class="o">:</span> <span class="s">@&quot;Jhon Doe&quot;</span><span class="p">,</span> <span class="s">@&quot;age&quot;</span><span class="o">:</span> <span class="mi">@24</span><span class="p">,</span> <span class="s">@&quot;gender&quot;</span><span class="o">:</span> <span class="s">@&quot;M&quot;</span><span class="p">,</span> <span class="s">@&quot;city&quot;</span><span class="o">:</span> <span class="s">@&quot;Pune&quot;</span><span class="l">}</span><span class="p">];</span>
</pre></div>
</td></tr></table></div>
</div>
<h2 id="data">Data<a class="headerlink" href="#data" title="Permanent link">&para;</a></h2>
<h3 id="setlocationshared"><code class="codehilite">setLocationShared</code><a class="headerlink" href="#setlocationshared" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p>Allows you to enable or disable Kontext SDK location collection. Due to Apple's <a href="https://developer.apple.com/app-store/review/guidelines/#location">App Store Guidelines</a>, it is required in iKontext applications to get the user's consent before collecting location. </p>
<h3 id="promptlocation"><code class="codehilite">promptLocation</code><a class="headerlink" href="#promptlocation" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p>Prompts the user for location permissions to allow geotagging from the Kontext dashboard. This lets you send notifications based on the device's location.</p>
<p>Note: Requires the follow entries in your .plist file.</p>
<ul>
<li><code class="codehilite">NSLocationUsageDescription</code> (For iKontext 7 and later)</li>
<li><code class="codehilite">NSLocationWhenInUseUsageDescription</code>
  Optional:</li>
<li><code class="codehilite">NSLocationAlwaysAndWhenInUseUsageDescription</code> and <code class="codehilite">NSLocationAlwaysUsageDescription</code> along with <code class="codehilite">UIBackgroundModes -&gt; location</code>
  Example plist image: <a href="https://i.imgur.com/OZDQpyQ.png">https://i.imgur.com/OZDQpyQ.png</a></li>
</ul>
<div class="superfences-tabs">
<input name="__tabs_13" type="radio" id="__tab_13_0" checked="checked" />
<label for="__tab_13_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Kontext</span><span class="p">.</span><span class="n">promptLocation</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_13" type="radio" id="__tab_13_1" />
<label for="__tab_13_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">[</span><span class="n">Kontext</span> <span class="n">promptLocation</span><span class="p">];</span>
</pre></div>
</td></tr></table></div>
</div>
<h2 id="sending-notifications">Sending Notifications<a class="headerlink" href="#sending-notifications" title="Permanent link">&para;</a></h2>
<h3 id="postnotification"><code class="codehilite">postNotification</code><a class="headerlink" href="#postnotification" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p>Allows you to send notifications from user to user or schedule ones in the future to be delivered to the current device.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="codehilite">parameters</code></td>
<td>NSDictionary*</td>
<td>Dictionary of notification options</td>
</tr>
<tr>
<td><code class="codehilite">onSuccess(Optional)</code></td>
<td>KontextResultSuccessBlock</td>
<td>Called if there were no errors sending the notification</td>
</tr>
<tr>
<td><code class="codehilite">onFailure(Optional)</code></td>
<td>KontextFailureBlock</td>
<td>Called if there was an error</td>
</tr>
</tbody>
</table>
<div class="superfences-tabs">
<input name="__tabs_14" type="radio" id="__tab_14_0" checked="checked" />
<label for="__tab_14_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Kontext</span><span class="p">.</span><span class="n">postNotification</span><span class="p">([</span><span class="s">&quot;contents&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;en&quot;</span><span class="p">:</span> <span class="s">&quot;Test Message&quot;</span><span class="p">],</span> <span class="s">&quot;include_player_ids&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;3009e210-3166-11e5-bc1b-db44eb02b120&quot;</span><span class="p">]])</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_14" type="radio" id="__tab_14_1" />
<label for="__tab_14_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">[</span><span class="n">Kontext</span> <span class="nl">postNotification</span><span class="p">:</span><span class="l">@{</span>
   <span class="s">@&quot;contents&quot;</span> <span class="o">:</span> <span class="l">@{</span><span class="s">@&quot;en&quot;</span><span class="o">:</span> <span class="s">@&quot;Test Message&quot;</span><span class="l">}</span><span class="p">,</span>
   <span class="s">@&quot;include_player_ids&quot;</span><span class="o">:</span> <span class="l">@[</span><span class="s">@&quot;3009e210-3166-11e5-bc1b-db44eb02b120&quot;</span><span class="l">]</span>
<span class="l">}</span><span class="p">];</span>
</pre></div>
</td></tr></table></div>
</div>
<h3 id="clearkontextnotifications"><code class="codehilite">ClearKontextNotifications</code><a class="headerlink" href="#clearkontextnotifications" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p>iOS provides a standard way to clear notifications by clearing badge count, thus there is no specific Kontext API call for clearing notifications.</p>
<h3 id="setsubscription"><code class="codehilite">setSubscription</code><a class="headerlink" href="#setsubscription" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p>You can call this method with false to opt users out of receiving all notifications through Kontext. You can pass true later to opt users back into notifications.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="codehilite">enable</code></td>
<td>BOOL</td>
<td></td>
</tr>
</tbody>
</table>
<div class="superfences-tabs">
<input name="__tabs_15" type="radio" id="__tab_15_0" checked="checked" />
<label for="__tab_15_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Kontext</span><span class="p">.</span><span class="n">setSubscription</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_15" type="radio" id="__tab_15_1" />
<label for="__tab_15_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">[</span><span class="n">Kontext</span> <span class="nl">setSubscription</span><span class="p">:</span><span class="nb">false</span><span class="p">];</span>
</pre></div>
</td></tr></table></div>
</div>
<h2 id="email">Email<a class="headerlink" href="#email" title="Permanent link">&para;</a></h2>
<h3 id="setemail"><code class="codehilite">setEmail</code><a class="headerlink" href="#setemail" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p><code class="codehilite">setEmail</code> allows you to set the user's email address with the Kontext SDK. We offer several overloaded versions of this method.</p>
<div class="superfences-tabs">
<input name="__tabs_16" type="radio" id="__tab_16_0" checked="checked" />
<label for="__tab_16_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Kontext</span><span class="p">.</span><span class="n">setEmail</span><span class="p">(</span><span class="s">&quot;example@domain.com&quot;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_16" type="radio" id="__tab_16_1" />
<label for="__tab_16_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">[</span><span class="n">Kontext</span> <span class="nl">setEmail</span><span class="p">:</span><span class="s">@&quot;example@domain.com&quot;</span><span class="p">];</span>
</pre></div>
</td></tr></table></div>
</div>
<h3 id="logoutemail"><code class="codehilite">logoutEmail</code><a class="headerlink" href="#logoutemail" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p>If your app implements logout functionality, you can call <code class="codehilite">logoutEmail</code> to dissociate the email from the device:</p>
<div class="superfences-tabs">
<input name="__tabs_17" type="radio" id="__tab_17_0" checked="checked" />
<label for="__tab_17_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Kontext</span><span class="p">.</span><span class="n">logoutEmail</span><span class="p">();</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_17" type="radio" id="__tab_17_1" />
<label for="__tab_17_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">[</span><span class="n">Kontext</span> <span class="n">logoutEmail</span><span class="p">];</span>
</pre></div>
</td></tr></table></div>
</div>
<h3 id="addemailsubscriptionobserver"><code class="codehilite">addEmailSubscriptionObserver</code><a class="headerlink" href="#addemailsubscriptionobserver" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p>We have also added a new email subscription observer to track changes to email subscriptions (ie. the user sets their email or logs out). In order to subscribe to email subscription changes you can implement the following:</p>
<div class="superfences-tabs">
<input name="__tabs_18" type="radio" id="__tab_18_0" checked="checked" />
<label for="__tab_18_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Kontext</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="kc">self</span> <span class="k">as</span> <span class="n">OSEmailSubscriptionObserver</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_18" type="radio" id="__tab_18_1" />
<label for="__tab_18_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">[</span><span class="n">Kontext</span> <span class="nl">addEmailSubscriptionObserver</span><span class="p">:</span><span class="nb">self</span><span class="p">];</span>
</pre></div>
</td></tr></table></div>
</div>
<p>Now, whenever the email subscription changes, this method will be called:</p>
<div class="superfences-tabs">
<input name="__tabs_19" type="radio" id="__tab_19_0" checked="checked" />
<label for="__tab_19_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">func</span> <span class="nf">onOSEmailSubscriptionChanged</span><span class="p">(</span><span class="kc">_</span> <span class="n">stateChanges</span><span class="p">:</span> <span class="n">OSEmailSubscriptionStateChanges</span><span class="p">!)</span> <span class="p">{</span> 

<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_19" type="radio" id="__tab_19_1" />
<label for="__tab_19_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">-(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onOSEmailSubscriptionChanged:</span><span class="p">(</span><span class="n">OSEmailSubscriptionStateChanges</span> <span class="o">*</span><span class="p">)</span><span class="nv">stateChanges</span> <span class="p">{</span>

<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<h2 id="notifications-events">Notifications Events<a class="headerlink" href="#notifications-events" title="Permanent link">&para;</a></h2>
<h3 id="kontexthandlenotificationreceivedblock"><code class="codehilite">KontextHandleNotificationReceivedBlock</code><a class="headerlink" href="#kontexthandlenotificationreceivedblock" title="Permanent link">&para;</a></h3>
<p>CALLBACK</p>
<p>Called when the app receives a notification while in focus only.</p>
<div class="admonition info">
<p class="admonition-title">Note+</p>
<p>If you need this to be called when your app is in the background, set content_available to true when you create your notification. The "force-quit" state (i.e app was swiped away) is not currently supported.</p>
</div>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="codehilite">notification</code></td>
<td><a href="#kontextnotification">KontextNotification</a></td>
<td></td>
</tr>
</tbody>
</table>
<div class="superfences-tabs">
<input name="__tabs_20" type="radio" id="__tab_20_0" checked="checked" />
<label for="__tab_20_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span> <span class="n">notification</span> <span class="k">in</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Received Notification - </span><span class="si">\(</span><span class="n">notification</span><span class="p">.</span><span class="n">payload</span><span class="p">.</span><span class="n">notificationID</span><span class="si">)</span><span class="s"> - </span><span class="si">\(</span><span class="n">notification</span><span class="p">.</span><span class="n">payload</span><span class="p">.</span><span class="n">title</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_20" type="radio" id="__tab_20_1" />
<label for="__tab_20_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">^</span><span class="p">(</span><span class="n">OSNotification</span> <span class="o">*</span><span class="n">notification</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Received Notification - %@ - %@&quot;</span><span class="p">,</span> <span class="n">notification</span><span class="p">.</span><span class="n">payload</span><span class="p">.</span><span class="n">notificationID</span><span class="p">,</span> <span class="n">notification</span><span class="p">.</span><span class="n">payload</span><span class="p">.</span><span class="n">title</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<h3 id="kontexthandlenotificationactionblock"><code class="codehilite">KontextHandleNotificationActionBlock</code><a class="headerlink" href="#kontexthandlenotificationactionblock" title="Permanent link">&para;</a></h3>
<p>CALLBACK</p>
<p>Called when the user opens or taps an action on a notification.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="codehilite">result</code></td>
<td><a href="#kontextnotificationopenedresult">KontextNotificationOpenedResult</a></td>
<td></td>
</tr>
</tbody>
</table>
<div class="superfences-tabs">
<input name="__tabs_21" type="radio" id="__tab_21_0" checked="checked" />
<label for="__tab_21_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span> <span class="n">result</span> <span class="k">in</span>

    <span class="c1">// This block gets called when the user reacts to a notification received</span>
    <span class="kd">let</span> <span class="nv">payload</span><span class="p">:</span> <span class="n">OSNotificationPayload</span> <span class="p">=</span> <span class="n">result</span><span class="p">!.</span><span class="n">notification</span><span class="p">.</span><span class="n">payload</span>
    <span class="kd">var</span> <span class="nv">fullMessage</span> <span class="p">=</span> <span class="n">payload</span><span class="p">.</span><span class="n">body</span>

    <span class="c1">//Try to fetch the action selected</span>
    <span class="k">if</span> <span class="kd">let</span> <span class="nv">additionalData</span> <span class="p">=</span> <span class="n">payload</span><span class="p">.</span><span class="n">additionalData</span><span class="p">,</span> <span class="n">actionSelected</span> <span class="p">=</span> <span class="n">additionalData</span><span class="p">[</span><span class="s">&quot;actionSelected&quot;</span><span class="p">]</span> <span class="k">as</span><span class="p">?</span> <span class="nb">String</span> <span class="p">{</span>
        <span class="n">fullMessage</span> <span class="p">=</span>  <span class="n">fullMessage</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Pressed ButtonId:</span><span class="si">\(</span><span class="n">actionSelected</span><span class="si">)</span><span class="s">&quot;</span>
    <span class="p">}</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;fullMessage = </span><span class="si">\(</span><span class="n">fullMessage</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_21" type="radio" id="__tab_21_1" />
<label for="__tab_21_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">^</span><span class="p">(</span><span class="n">KontextNotificationOpenedResult</span> <span class="o">*</span><span class="n">result</span><span class="p">)</span> <span class="p">{</span>

   <span class="c1">// This block gets called when the user opens or taps an action on a notification</span>
   <span class="n">KontextNotificationPayload</span><span class="o">*</span> <span class="n">payload</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="n">notification</span><span class="p">.</span><span class="n">payload</span><span class="p">;</span>

   <span class="bp">NSString</span><span class="o">*</span> <span class="n">messageTitle</span> <span class="o">=</span> <span class="s">@&quot;Kontext Example&quot;</span><span class="p">;</span>
   <span class="bp">NSString</span><span class="o">*</span> <span class="n">fullMessage</span> <span class="o">=</span> <span class="p">[</span><span class="n">payload</span><span class="p">.</span><span class="n">body</span> <span class="k">copy</span><span class="p">];</span>

   <span class="k">if</span> <span class="p">(</span><span class="n">payload</span><span class="p">.</span><span class="n">additionalData</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">payload</span><span class="p">.</span><span class="n">title</span><span class="p">)</span>
         <span class="n">messageTitle</span> <span class="o">=</span> <span class="n">payload</span><span class="p">.</span><span class="n">title</span><span class="p">;</span>

      <span class="bp">NSDictionary</span><span class="o">*</span> <span class="n">additionalData</span> <span class="o">=</span> <span class="n">payload</span><span class="p">.</span><span class="n">additionalData</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="n">additionalData</span><span class="p">[</span><span class="s">@&quot;actionSelected&quot;</span><span class="p">])</span>
         <span class="n">fullMessage</span> <span class="o">=</span> <span class="p">[</span><span class="n">fullMessage</span> <span class="nl">stringByAppendingString</span><span class="p">:[</span><span class="bp">NSString</span> <span class="nl">stringWithFormat</span><span class="p">:</span><span class="s">@&quot;</span><span class="se">\n</span><span class="s">Pressed ButtonId:%@&quot;</span><span class="p">,</span> <span class="n">additionalData</span><span class="p">[</span><span class="s">@&quot;actionSelected&quot;</span><span class="p">]]];</span>
   <span class="p">}</span>

   <span class="bp">UIAlertView</span><span class="o">*</span> <span class="n">alertView</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">UIAlertView</span> <span class="n">alloc</span><span class="p">]</span>
                               <span class="nl">initWithTitle</span><span class="p">:</span><span class="n">messageTitle</span>
                                     <span class="nl">message</span><span class="p">:</span><span class="n">fullMessage</span>
                                    <span class="nl">delegate</span><span class="p">:</span><span class="nb">self</span>
                           <span class="nl">cancelButtonTitle</span><span class="p">:</span><span class="s">@&quot;Close&quot;</span>
                          <span class="nl">otherButtonTitles</span><span class="p">:</span><span class="nb">nil</span><span class="p">,</span> <span class="nb">nil</span><span class="p">];</span>
   <span class="p">[</span><span class="n">alertView</span> <span class="n">show</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<h3 id="kontextnotificationopenedresult"><code class="codehilite">KontextNotificationOpenedResult</code><a class="headerlink" href="#kontextnotificationopenedresult" title="Permanent link">&para;</a></h3>
<p>INTERFACE ELEMENT</p>
<p>The information returned from a notification the user received. Resulting class passed to <a href="#kontexthandlenotificationactionblock">KontextHandleNotificationActionBlock</a>.</p>
<table>
<thead>
<tr>
<th>Class Properties</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="codehilite">notification</code>(<a href="#kontextnotification">KontextNotification</a>);</td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">action</code>(<a href="#kontextnotificationaction">KontextNotificationAction</a>);|</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="kontextnotification"><code class="codehilite">KontextNotification</code><a class="headerlink" href="#kontextnotification" title="Permanent link">&para;</a></h3>
<p>INTERFACE ELEMENT</p>
<p>The notification the user received.</p>
<table>
<thead>
<tr>
<th>Class Properties</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="codehilite">payload</code>(<a href="#kontextnotificationpayload">KontextNotificationPayload</a>);</td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">displayType</code>(<a href="#kontextnotificationdisplaytype">KontextNotificationDisplayType</a>);</td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">shown</code>(<em>BOOL</em>);</td>
<td>True when the user was able to see the notification. False when app is in focus and in-app alerts are disabled, or the remote notification is silent.</td>
</tr>
<tr>
<td><code class="codehilite">silentNotification</code>(<em>BOOL</em>);</td>
<td>True when the received notification is silent. Silent means there is no alert, sound, or badge payload in the APS dictionary. Requires remote-notification within UIBackgroundModes array of the Info.plist</td>
</tr>
</tbody>
</table>
<h3 id="kontextnotificationaction"><code class="codehilite">KontextNotificationAction</code><a class="headerlink" href="#kontextnotificationaction" title="Permanent link">&para;</a></h3>
<p>INTERFACE ELEMENT</p>
<p>The action the user took on the notification.</p>
<table>
<thead>
<tr>
<th>Class Properties</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="codehilite">actionID</code>(<em>NSString</em>);</td>
<td>The ID associated with the button tapped. NULL when the actionType is NotificationTapped or InAppAlertClosed.</td>
</tr>
<tr>
<td><code class="codehilite">type</code>(<a href="#kontextnotificationactiontype">KontextNotificationActionType</a>);</td>
<td>The type of the notification action.</td>
</tr>
</tbody>
</table>
<h3 id="kontextnotificationactiontype"><code class="codehilite">KontextNotificationActionType</code><a class="headerlink" href="#kontextnotificationactiontype" title="Permanent link">&para;</a></h3>
<p>INTERFACE ELEMENT</p>
<p>The action type (<em>NSUInteger Enum</em>) associated to an KontextNotificationAction object.</p>
<table>
<thead>
<tr>
<th>NSUInteger Enum Properties</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="codehilite">opened</code></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">ActionTaken</code></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="kontextnotificationdisplaytype"><code class="codehilite">KontextNotificationDisplayType</code><a class="headerlink" href="#kontextnotificationdisplaytype" title="Permanent link">&para;</a></h3>
<p>INTERFACE ELEMENT</p>
<p>The way in which a notification was displayed to the user (<em>NSUInteger Enum</em>).</p>
<table>
<thead>
<tr>
<th>NSUInteger Enum Properties</th>
<th>Raw Value</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="codehilite">Notification</code></td>
<td>2</td>
<td>iOS native notification display.</td>
</tr>
<tr>
<td><code class="codehilite">InAppAlert</code></td>
<td>1</td>
<td>Default UIAlertView display.</td>
</tr>
<tr>
<td><code class="codehilite">None</code></td>
<td>0</td>
<td>Notification is silent, or app is in focus but InAppAlertNotifications are disabled.</td>
</tr>
</tbody>
</table>
<h3 id="kontextnotificationpayload"><code class="codehilite">KontextNotificationPayload</code><a class="headerlink" href="#kontextnotificationpayload" title="Permanent link">&para;</a></h3>
<p>INTERFACE ELEMENT</p>
<p>Contents and settings of the notification the user received.</p>
<table>
<thead>
<tr>
<th>Class Properties</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="codehilite">notificationID</code></td>
<td>NSString</td>
<td>Kontext notification UUID</td>
</tr>
<tr>
<td><code class="codehilite">contentAvailable</code></td>
<td>BOOL</td>
<td>Provide this key with a value of 1 to indicate that new content is available. Including this key and value means that when your app is launched in the background or resumed <code class="codehilite"><span class="n">application</span><span class="o">:</span><span class="n">didReceiveRemoteNotification</span><span class="o">:</span><span class="n">fetchCompletionHandler</span><span class="o">:</span></code> is called.</td>
</tr>
<tr>
<td><code class="codehilite">badge</code></td>
<td>NSInteger</td>
<td>The badge number assigned to the application icon</td>
</tr>
<tr>
<td><code class="codehilite">sound</code></td>
<td>NSString</td>
<td>The sound parameter passed to the notification. By default set to <code class="codehilite">UILocalNotificationDefaultSoundName</code>. <a href="https://documentation.kontext.in/docs/customize-notification-sounds">Read more about custom sounds</a></td>
</tr>
<tr>
<td><code class="codehilite">title</code></td>
<td>NSString</td>
<td>Title text of the notification</td>
</tr>
<tr>
<td><code class="codehilite">body</code></td>
<td>NSString</td>
<td>Body text of the notification</td>
</tr>
<tr>
<td><code class="codehilite">subtitle</code></td>
<td>NSString</td>
<td>iOS 10+ - subtitle text of the notification</td>
</tr>
<tr>
<td><code class="codehilite">launchUrl</code></td>
<td>NSString</td>
<td>Web address to launch within the app via a <code class="codehilite">UIWebView</code></td>
</tr>
<tr>
<td><code class="codehilite">additionalData</code></td>
<td>NSDictonary</td>
<td>Additional Data add to the notification by you</td>
</tr>
<tr>
<td><code class="codehilite">attachments</code></td>
<td>NSDictonary</td>
<td>iOS 10+ - Attachments sent as part of the rich notification</td>
</tr>
<tr>
<td><code class="codehilite">actionButtons</code></td>
<td>NSArray</td>
<td>Action buttons set on the notification</td>
</tr>
<tr>
<td><code class="codehilite">rawPayload</code></td>
<td>NSDictonary</td>
<td>Holds the raw APS payload received</td>
</tr>
</tbody>
</table>
<h2 id="debug">Debug<a class="headerlink" href="#debug" title="Permanent link">&para;</a></h2>
<h3 id="setloglevel"><code class="codehilite">setLogLevel</code><a class="headerlink" href="#setloglevel" title="Permanent link">&para;</a></h3>
<p>METHOD</p>
<p>Enable logging to help debug if you run into an issue setting up Kontext. This selector is static so you can call it before Kontext init. The following options are available with increasingly more information; <code class="codehilite">ONE_S_LL_NONE</code>, <code class="codehilite">ONE_S_LL_FATAL</code>, <code class="codehilite">ONE_S_LL_ERROR</code>, <code class="codehilite">ONE_S_LL_WARN</code>, <code class="codehilite">ONE_S_LL_INFO</code>, <code class="codehilite">ONE_S_LL_DEBUG</code>, <code class="codehilite">ONE_S_LL_VERBOSE</code>.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="codehilite">logLevel</code></td>
<td>LOG_LEVEL</td>
<td>Sets the logging level to print to the Xcode log</td>
</tr>
<tr>
<td><code class="codehilite">visualLevel</code></td>
<td>LOG_LEVEL</td>
<td>Sets the logging level to show as alert dialogs.</td>
</tr>
</tbody>
</table>
<div class="superfences-tabs">
<input name="__tabs_22" type="radio" id="__tab_22_0" checked="checked" />
<label for="__tab_22_0">Swift</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Kontext</span><span class="p">.</span><span class="n">setLogLevel</span><span class="p">(.</span><span class="n">LL_DEBUG</span><span class="p">,</span> <span class="n">visualLevel</span><span class="p">:</span> <span class="p">.</span><span class="n">LL_DEBUG</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<input name="__tabs_22" type="radio" id="__tab_22_1" />
<label for="__tab_22_1">Objective-C</label>
<div class="superfences-content"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">[</span><span class="n">Kontext</span> <span class="nl">setLogLevel</span><span class="p">:</span><span class="n">ONE_S_LL_DEBUG</span> <span class="nl">visualLevel</span><span class="p">:</span><span class="n">ONE_S_LL_DEBUG</span><span class="p">];</span>
</pre></div>
</td></tr></table></div>
</div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../quickstart/" title="Quick Start" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Quick Start
              </span>
            </div>
          </a>
        
        
          <a href="../push-certificate/" title="Generate an iOS Push Cert" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Generate an iOS Push Cert
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2016 - 2018 Adpin Technologies Pvt. Ltd.
          </div>
        
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="http://struct.cc" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/kontext" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/yourkontext" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://linkedin.com/in/kontext" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.150a6ebd.js"></script>
      
      <script>app.initialize({version:"0.17.5",url:{base:"../.."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","None","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>